# 基础篇

## 1. 绪论

### 1.1 基本概念

#### 1.1.1 数据（data）

描述事物的符号记录称为数据。

#### 1.1.2 数据库（DB）

数据库是长期储存在计算机内、有组织的、可共享的大量数据的集合。

#### 1.1.3 数据库管理系统（DBMS）

数据库管理系统是一个计算机软件，用来存储和管理数据库。

#### 1.1.4 数据库系统（DBS）

数据库系统是由数据库、数据库管理系统、应用程序和数据库管理员组成的存储、管理、处理和维护数据的系统。

### 1.3 数据模型和数据模式

#### 1.3.1 数据模型

数据模型是对现实世界数据特征的抽象，有层次模型、网状模型、关系模型等。数据模型通常由数据结构、数据操作和数据的完整性约束条件三部分构成。层次模型的数据结构为树，网状模型的数据结构为图，关系模型的数据结构为表。

#### 1.3.2 数据模式

按照某一数据模型设计的，数据库中全体数据的逻辑结构和特征的描述。它仅涉及型的描述。是数据库总体特征的设计。

#### 1.3.3 实例

模式的一个具体值称为模式的一个实例。同一个模式可以有多个实例，是特定时刻存储在数据库中的信息的集合。

### 1.4  三级模式和两级映像

#### 1.4.1 外模式

#### 1.4.2 模式

#### 1.4.3 内模式

#### 1.4.5 外模式/模式映像

#### 1.4.6 模式/内模式映像

### 1.5 数据独立性

## 2. 关系数据库

### 2.1 关系数据结构

#### 2.1.1 表

### 2.2 关系操作

#### 2.2.1 查询、插入、删除、修改

#### 2.2.2 查询

1. 选择、投影、并、差、笛卡尔积

### 2.3 关系完整性

#### 2.3.1 实体完整性

#### 2.3.2 参照完整性

#### 2.3.3 用户定义完整性

### 2.4 关系代数

#### 2.4.2 并相容性

#### 2.4.1 五个基本运算

1. 并
2. 差
3. 积
4. 选择
5. 投影

## 3. SQL语言

### 3.1 数据定义

#### 3.1.1 基本表

```mysql
# 定义表
CREATE TABLE
# 删除表
DROP TABLE
# 修改表
ALTER TABLE
```

#### 3.1.2 视图

```mysql
# 定义视图
CREATE VIEW
# 删除视图
DROP VIEW
```

#### 3.1.3 索引

```mysql
# 定义索引
CREATE INDEX
# 删除索引
DROP INDEX
# 修改索引
ALTER INDEX
```

### 3.2 数据操纵

#### 3.2.1  查询

```mysql
# 查询数据
SELECT
FROM
WHERE
GROUP BY
ORDER BY
```

#### 3.2.2 插入

```mysql
# 插入数据
INSERT INTO
VALUES
```

#### 3.2.3 修改

```mysql
# 更新数据
UPDATE
SET
WHERE
```

#### 3.2.4 删除

```mysql
# 删除数据
DELETE
FROM
WHERE
```

### 3.3 数据控制

#### 3.3.1 授权

```mysql
# 授权给用户
GRANT
ON
TO
```

#### 3.3.2 收回授权

```mysql
# 收回授权
REVOKE
ON
FROM
```

## 4. 数据库安全性

### 4.1 概述

### 4.2 安全性控制

### 4.3 视图机制

### 4.4 审计

### 4.5 数据加密

### 4.6 其他安全性保护

## 5. 数据库完整性

### 5.1 实体完整性

```mysql
PRIMARY KEY (<属性名>, <属性名>, ...)
```

### 5.2 参照完整性

```mysql
FOREIGN KEY (<属性名>, <属性名>, ...) REFERENCES <表名>
```

### 5.3 用户自定义完整性

```mysql
NOT NULL	# 列值非空
UNIQUE		# 列值唯一
CHECK ()	# 条件表达式
```

### 5.4 完整性约束命名子句

1. 完整性约束命名子句

   ```mysql
   # 完整性约束条件：包括 NOT NULL, UNIQUE, PRIMARY KEY, FOREIGN KEY, CHECK 短语等
   CONSTRAINT <完整性约束名> <完整性约束条件>
   ```

2. 修改表中的完整性约束

   ```mysql
   ALTER TABLE <表名>
   DROP CONSTRAINT <完整性约束名>
   ADD CONSTRAINT <完整性约束名> <完整性约束条件>
   ```

### 5.5 断言

通过声明性断言可以指定更具一般性的约束，断言创建后，任何对断言中涉及关系的操作都会触发对断言的检查，任何使断言不为真值的操作都会被拒绝执行。如果断言很复杂，系统在监测和维护断言上的开销较高，应该谨慎使用断言。

1. 创建断言

   ```mysql
   CREATE ASSERTION <断言名>
   <CHECK 子句>
   ```

2. 删除断言

   ```mysql
   DROP ASSERTION <断言名>
   ```

### 5.6 触发器

触发器是用户定义在关系表上的一类由事件驱动的特殊过程。类似于约束，是一种动态的过程性的约束。  

例如教师的工资不得低于4000元，如果低于4000元，则自动改为4000元。

#### 5.6.1 定义触发器

```mysql
# 触发器名：同一模式下，触发器名必须是唯一的
# 触发时机：BEFORE|AFTER
# 触发事件：INSERT|DELETE|UPDATE
# 表名：触发器只能定义在基本表上
# 触发器类型：行级触发器、语句级触发器
# 触发条件：触发器被激活时，当触发条件为真触发动作体才执行，否则不执行
# 触发动作体：可以是一个 PL/SQL 过程块、存储过程
CREATE TRIGGER <触发器名>
{BEFORE|AFTER} <触发事件> ON <表名>

REFERENCING NEW|OLD ROW AS <表名>
FOR EACH {ROW|STATEMENT}
[WHEN <触发条件>]
<触发动作体>
```

#### 5.6.2 激活触发器

同一个表上的多个触发器激活时遵循如下的执行顺序：

1. 执行该表上的 BEFORE 触发器
2. 激活触发器的 SQL 语句
3. 执行该表上的 AFTER 触发器

对于同一个表上的多个 BEFORE(AFTER) 触发器，遵循“谁先创建谁先执行”的原则。

#### 5.6.3 删除触发器

```mysql
DROP TRIGGER <触发器名> ON <表名>
```

# 设计与应用开发篇

## 6. 关系数据理论

## 7. 数据库设计

## 8. 数据库编程

# 系统篇

## 9. 关系查询处理和查询优化

## 10. 数据库恢复技术

## 11. 并发控制





